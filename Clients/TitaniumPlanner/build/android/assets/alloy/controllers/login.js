function __processArg(t,e){var i=null;return t&&(i=t[e]||null,delete t[e]),i}function Controller(){function t(){var t=a.validate([i.txtUserName,i.txtUserPassword],{showAlert:!0});t&&e()}function e(){var t=i.txtUserName.value,e=i.txtUserPassword.value,r="https://rt-pay.com/vrtwebapi/api/user/login";r=r+"?username="+t+"&password="+e+"&customerNumber=100",i.activityIndicator.show(),i.btnLogin.enabled=!1;var n=Ti.Network.createHTTPClient({onload:function(){i.activityIndicator.hide(),i.btnLogin.enabled=!0,JSON.parse(this.responseText),Ti.API.log(this.responseText);var t=Alloy.createController("main").getView();t.open()},onerror:function(){i.activityIndicator.hide(),i.btnLogin.enabled=!0,alert("401"==this.status?"Wrong credentials!":"Server side issue")},timeout:15e3});n.open("GET",r),n.send()}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="login",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var i=this,r={},n={};Alloy.Models.instance("loginData"),i.__views.login=Ti.UI.createWindow({backgroundColor:"white",titleControl:"false",layout:"vertical",navBarHidden:"true",id:"login"}),i.__views.login&&i.addTopLevelView(i.__views.login),i.__views.view_login=Ti.UI.createView({top:"10%",layout:"vertical",left:"10dp",right:"10dp",backgroundColor:"white",id:"view_login"}),i.__views.login.add(i.__views.view_login),i.__views.lblWelcome=Ti.UI.createLabel({width:Ti.UI.SIZE,height:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,font:{fontSize:18},text:"Welcome to Planner",id:"lblWelcome"}),i.__views.view_login.add(i.__views.lblWelcome),i.__views.txtUserName=Ti.UI.createTextField({width:"100%",height:Ti.UI.SIZE,top:"10dp",color:"#3975A9",borderColor:"#3975A9",borderStyle:Ti.UI.INPUT_BORDERSTYLE_NONE,font:{fontSize:16},hintText:"User Name",tintColor:"#3975A9",rules:"required",id:"txtUserName",name:"User Name"}),i.__views.view_login.add(i.__views.txtUserName),i.__views.txtUserPassword=Ti.UI.createTextField({width:"100%",height:Ti.UI.SIZE,top:"10dp",color:"#3975A9",borderColor:"#3975A9",borderStyle:Ti.UI.INPUT_BORDERSTYLE_NONE,font:{fontSize:16},hintText:"User Password",passwordMask:"true",rules:"required",id:"txtUserPassword",name:"User Password"}),i.__views.view_login.add(i.__views.txtUserPassword),i.__views.btnLogin=Ti.UI.createButton({backgroundColor:"#3975A9",color:"white",width:"100%",top:"15dp",title:"Login",id:"btnLogin"}),i.__views.view_login.add(i.__views.btnLogin),t?i.__views.btnLogin.addEventListener("click",t):n["$.__views.btnLogin!click!tryLogin"]=!0,i.__views.activityIndicator=Ti.UI.createActivityIndicator({top:10,left:10,height:Ti.UI.SIZE,width:"100%",id:"activityIndicator",message:"Loading..."}),i.__views.view_login.add(i.__views.activityIndicator);var s=function(){i.txtUserName.value=_.isFunction(Alloy.Models.loginData.transform)?Alloy.Models.loginData.transform().userName:_.template("<%=loginData.userName%>",{loginData:Alloy.Models.loginData.toJSON()}),i.txtUserPassword.value=_.isFunction(Alloy.Models.loginData.transform)?Alloy.Models.loginData.transform().userPassword:_.template("<%=loginData.userPassword%>",{loginData:Alloy.Models.loginData.toJSON()})};Alloy.Models.loginData.on("fetch change destroy",s),r.destroy=function(){Alloy.Models.loginData.off("fetch change destroy",s)},_.extend(i,i.__views);var o=Alloy.Models.loginData;o.set("userName","Andrei"),o.fetch();var a=require("de.mwfire.validate");i.login.open(),Alloy.Models.loginData.fetch(),i.login.addEventListener("close",function(){i.destroy()});var l=function(){i.login.removeEventListener("postlayout",l),i.login.activity.actionBar.hide()};i.login.addEventListener("postlayout",l),n["$.__views.btnLogin!click!tryLogin"]&&i.__views.btnLogin.addEventListener("click",t),_.extend(i,r)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;