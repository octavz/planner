function __processArg(t,e){var i=null;return t&&(i=t[e]||null,delete t[e]),i}function Controller(){function t(e){if(!e||!e.fromAdapter){t.opts||{};for(var r=o.models,s=r.length,n=[],a=0;s>a;a++){var l=r[a];l.__transform={};var c=Ti.UI.createTableViewRow({hasCheck:!1,width:Ti.UI.FILL,height:"40dp",rowId:"undefined"!=typeof l.__transform.id_project?l.__transform.id_project:l.get("id_project")});n.push(c);var h=Ti.UI.createView({width:"90%",height:Ti.UI.FILL,left:"10dp"});c.add(h);var d=Ti.UI.createLabel({left:0,color:"black",font:{fontFamily:"HelveticaNeue",fontSize:"12sp"},text:"undefined"!=typeof l.__transform.name?l.__transform.name:l.get("name")});h.add(d)}i.__views.tbProjects.setData(n)}}function e(t){var e=Alloy.createCollection("Project");e.fetch({query:"SELECT * FROM Projects"});for(var i=0;i<e.length;i++)if(e.at(i).get("id_project")==t.rowId){var r=Alloy.createCollection("Project");r.fetch({query:"SELECT * FROM Projects where id_project= "+t.rowId}),r.length>0&&(r.at(0).destroy(),Alloy.Collections.Project.fetch())}}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="Projects",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var i=this,r={};Alloy.Collections.instance("Project"),i.__views.Projects=Ti.UI.createWindow({backgroundColor:"white",id:"Projects"}),i.__views.Projects&&i.addTopLevelView(i.__views.Projects),i.__views.__alloyId14=Ti.UI.createLabel({text:"Projects",id:"__alloyId14"}),i.__views.Projects.add(i.__views.__alloyId14),i.__views.tfInsert=Ti.UI.createTextField({width:"290dp",height:"40dp",top:"10dp",left:"15dp",borderRadius:"6dp",borderColor:"black",borderWidth:"1dp",maxLength:"80dp",paddingLeft:"10dp",textAlign:Titanium.UI.TEXT_ALIGNMENT_LEFT,clearOnEdit:!0,id:"tfInsert"}),i.__views.Projects.add(i.__views.tfInsert),i.__views.btnInsert=Ti.UI.createButton({right:"15dp",top:"60dp",title:"Insert",id:"btnInsert"}),i.__views.Projects.add(i.__views.btnInsert),i.__views.tbProjects=Ti.UI.createTableView({widht:Ti.UI.FILL,height:Ti.UI.FILL,top:"100dp",id:"tbProjects"}),i.__views.Projects.add(i.__views.tbProjects);var o=Alloy.Collections.Project||Project;o.on("fetch destroy change add remove reset",t),r.destroy=function(){o.off("fetch destroy change add remove reset",t)},_.extend(i,i.__views),arguments[0]||{},i.btnInsert.addEventListener("click",function(){if(i.tfInsert.blur(),""!=i.tfInsert.value){var t=Alloy.createModel("Project",{name:i.tfInsert.value});t.save(),Alloy.Collections.Project.fetch()}else alert("Please fill out the text field above!")}),i.tbProjects.addEventListener("longpress",function(t){var i=t.row,r=Titanium.UI.createAlertDialog({title:"Remove",message:"Do you want to remove this row?",buttonNames:["Yes","No"],cancel:1});r.show(),r.addEventListener("click",function(t){0==t.index?e(i):1==t.index})}),Alloy.Collections.Project.fetch(),_.extend(i,r)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;