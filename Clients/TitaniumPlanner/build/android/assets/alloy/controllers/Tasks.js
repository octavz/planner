function __processArg(e,t){var i=null;return e&&(i=e[t]||null,delete e[t]),i}function Controller(){function e(t){if(!t||!t.fromAdapter){e.opts||{};for(var r=o.models,s=r.length,n=[],a=0;s>a;a++){var l=r[a];l.__transform={};var c=Ti.UI.createTableViewRow({hasCheck:!1,width:Ti.UI.FILL,height:"40dp",rowId:"undefined"!=typeof l.__transform.id_task?l.__transform.id_task:l.get("id_task")});n.push(c);var d=Ti.UI.createView({width:"90%",height:Ti.UI.FILL,left:"10dp"});c.add(d);var h=Ti.UI.createLabel({left:0,color:"black",font:{fontFamily:"HelveticaNeue",fontSize:"12sp"},text:"undefined"!=typeof l.__transform.title?l.__transform.title:l.get("title")});d.add(h)}i.__views.tbTasks.setData(n)}}function t(e){var t=Alloy.createCollection("Task");t.fetch({query:"SELECT * FROM Tasks"});for(var i=0;i<t.length;i++)if(t.at(i).get("id_task")==e.rowId){var r=Alloy.createCollection("Task");r.fetch({query:"SELECT * FROM Tasks where id_task = "+e.rowId}),r.length>0&&(r.at(0).destroy(),Alloy.Collections.Task.fetch())}}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="Tasks",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var i=this,r={};Alloy.Collections.instance("Task"),i.__views.Tasks=Ti.UI.createWindow({backgroundColor:"white",id:"Tasks"}),i.__views.Tasks&&i.addTopLevelView(i.__views.Tasks),i.__views.__alloyId23=Ti.UI.createLabel({text:"Tasks",id:"__alloyId23"}),i.__views.Tasks.add(i.__views.__alloyId23),i.__views.tfInsert=Ti.UI.createTextField({width:"290dp",height:"40dp",top:"10dp",left:"15dp",borderRadius:"6dp",borderColor:"black",borderWidth:"1dp",maxLength:"80dp",paddingLeft:"10dp",textAlign:Titanium.UI.TEXT_ALIGNMENT_LEFT,clearOnEdit:!0,id:"tfInsert"}),i.__views.Tasks.add(i.__views.tfInsert),i.__views.btnInsert=Ti.UI.createButton({right:"15dp",top:"60dp",title:"Insert",id:"btnInsert"}),i.__views.Tasks.add(i.__views.btnInsert),i.__views.tbTasks=Ti.UI.createTableView({widht:Ti.UI.FILL,height:Ti.UI.FILL,top:"100dp",id:"tbTasks"}),i.__views.Tasks.add(i.__views.tbTasks);var o=Alloy.Collections.Task||Task;o.on("fetch destroy change add remove reset",e),r.destroy=function(){o.off("fetch destroy change add remove reset",e)},_.extend(i,i.__views),arguments[0]||{},i.btnInsert.addEventListener("click",function(){if(i.tfInsert.blur(),""!=i.tfInsert.value){var e=Alloy.createModel("Task",{title:i.tfInsert.value});e.save(),Alloy.Collections.Task.fetch()}else alert("Please fill out the text field above!")}),i.tbTasks.addEventListener("longpress",function(e){var i=e.row,r=Titanium.UI.createAlertDialog({title:"Remove",message:"Do you want to remove this row?",buttonNames:["Yes","No"],cancel:1});r.show(),r.addEventListener("click",function(e){0==e.index?t(i):1==e.index})}),Alloy.Collections.Task.fetch(),_.extend(i,r)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;